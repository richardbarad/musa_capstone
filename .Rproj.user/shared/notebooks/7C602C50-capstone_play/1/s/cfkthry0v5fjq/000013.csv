"0",""
"0","basin_tracts_2 <- left_join(basin_tracts,epa_data,by='GEOID') %>% #Join tracts to EPA data"
"0","  filter(total_pop > 0) %>% #Remove tracts with no population"
"0","  mutate(pct_non_english = ifelse(is.nan(pct_non_english),NA,pct_non_english), #Turn nan to NA where denominator was zero."
"0","         pct_poverty = ifelse(is.nan(pct_poverty),NA,pct_poverty)) #Turn nan to NA where denominator was zero."
"0",""
"0","boundary_changes <- read.csv('Data/Boundary_Changes.csv') "
"0",""
"0","basin_tracts_2 <- boundary_changes %>%"
"0","  select(GEOID_TRACT_20,AREALAND_TRACT_20,GEOID_TRACT_10,AREALAND_TRACT_10,AREALAND_PART) %>%"
"0","  mutate(pct20 = round(AREALAND_PART / AREALAND_TRACT_20,2),"
"0","         GEOID_TRACT_10 = as.character(GEOID_TRACT_10),"
"0","         GEOID_TRACT_20 = as.character(GEOID_TRACT_20)) %>% "
"0","  right_join(.,cpc_basin %>% select(health_hazard_index,GEOID),by=join_by(GEOID_TRACT_10==GEOID)) %>%"
"0","  mutate(weighted_index = round(pct20 * health_hazard_index,2)) %>%"
"0","  st_drop_geometry() %>%"
"0","  group_by(GEOID_TRACT_20) %>% "
"0","  summarise(health_hazard_index = sum(weighted_index)) %>%"
"0","  rename(GEOID = GEOID_TRACT_20) %>%"
"0","  left_join(basin_tracts_2,.,by='GEOID')"
"0",""
"0","basin_tracts_2_4269 <- basin_tracts_2 %>% st_transform(4269)"
